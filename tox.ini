[tox]
envlist = py312, py312-minimal, py312-integration
isolated_build = true

[testenv]
deps = 
    pytest>=7.0
    pytest-cov>=4.0
    pytest-xdist>=3.0
extras = dev
commands = 
    pytest {posargs}

[testenv:py312-minimal]
# Test environment for basic functionality without external services
deps = 
    pytest>=7.0
    pytest-cov>=4.0
extras = dev
commands = 
    pytest -m "not azurite and not external_service and not slow" {posargs}

[testenv:py312-fast]
# Test environment excluding slow tests
deps = 
    pytest>=7.0
    pytest-cov>=4.0
    pytest-xdist>=3.0
extras = dev
commands = 
    pytest -m "not slow" {posargs}

[testenv:py312-integration]
# Test environment for integration tests (requires external services)
deps = 
    pytest>=7.0
    pytest-cov>=4.0
    pytest-xdist>=3.0
extras = dev
commands = 
    pytest -m "azurite or external_service or integration" {posargs}

[testenv:docs]
# Documentation building environment (if docs are added later)
deps = 
    sphinx
    sphinx-rtd-theme
commands = 
    python -c "print('No docs configured yet')"

[testenv:lint]
# Linting environment
deps = 
    ruff>=0.1
    black>=23.0
    mypy>=1.0
extras = dev
commands = 
    ruff check src/ tests/
    black --check src/ tests/
    mypy src/